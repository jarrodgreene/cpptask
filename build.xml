<?xml version="1.0" encoding="ISO-8859-1"?>
<project name="cpptask" basedir="." default="jar">

	<!-- ========================================================= -->
	<!--                    Project Properties                     -->
	<!-- ========================================================= -->
	<property name="build.dir"         location="build"/>
	<property name="classes.dir"       location="${build.dir}/classes"/>
	<property name="src.dir"           location="src"/>
	<property name="jarfile"           location="cpptask.jar"/>
	<property name="resources.jar.dir" location="resources/jar/cpptask.jar"/>

	<!-- library properties -->
	<property name="lib.dir"           location="lib"/>
	<property name="ant.lib.dir"       location="${lib.dir}/apache-ant-1.8.4"/>
	<path id="ant.lib.path">
		<fileset dir="${ant.lib.dir}"  includes="**/*.jar"/>
	</path>

	<!-- ========================================================= -->
	<!--                       Project Tasks                       -->
	<!-- ========================================================= -->
	<target name="clean" description="delete all generated files">
		<delete dir="${build.dir}"/>
		<delete file="${jarfile}"/>
		<delete dir="build-cpp"/>
	</target>

	<target name="init">
		<mkdir dir="${classes.dir}"/>
	</target>

	<target name="compile" depends="init" description="compile all the task code">
		<javac srcdir="${src.dir}"
		       destdir="${classes.dir}"
		       debug="true"
		       debuglevel="lines,vars,source"
		       includeantruntime="true"
		       classpathref="ant.lib.path"/>
	</target>

	<target name="jar" depends="compile" description="create the task jar file">
		<jar destfile="${jarfile}">
			<fileset dir="${classes.dir}" includes="**/*"/>
			<fileset dir="${resources.jar.dir}" includes="**/*"/>
			<manifest>
				<attribute name="Implementation-Title" value="cpptasks"/>
				<attribute name="Implementation-Version" value="${app.version} ${TODAY}"/>
				<attribute name="Implementation-Vendor" value="littlebluefrog.com"/>
			</manifest>
		</jar>
	</target>

</project>
